pipeline{
	agent any
	tools{
		maven "maven3.9.9"
	}
	stages{
		stage("build"){
			steps{
				echo "building the app"
				sh "mvn install"
			}
		}
		stage("Sonarqube analysis"){
			steps{
				withSonarQubeEnv(installationName: "sonarqube server") {
    				      sh 'mvn org.sonarsource.scanner.maven:sonar-maven-plugin:3.7.0.1746:sonar'
				}
			}
		}
		stage("deploy"){
			steps{
				echo "Deploying the apps"
			}
		}
	}
}